# Mobile App & PWA Setup Guide

This project is configured to support both Progressive Web App (PWA) and native mobile apps using Capacitor.

## Prerequisites

1. **Node.js 20+** (required for some dependencies)
2. **Xcode** (for iOS development - macOS only)
3. **Android Studio** (for Android development)

## Installation

Install the required dependencies:

```bash
npm install
```

## PWA Features

The app is configured as a Progressive Web App with:
- ✅ Web App Manifest (`/static/manifest.json`)
- ✅ Service Worker (auto-generated by vite-plugin-pwa)
- ✅ Offline support
- ✅ Install prompt on supported browsers
- ✅ App shortcuts (Lessons, Review)

### Testing PWA

1. Build the app: `npm run build`
2. Preview: `npm run preview`
3. Open in Chrome/Edge and check "Add to Home Screen" option
4. Open DevTools > Application > Service Workers to verify

## Mobile App Setup (Capacitor)

### Initial Setup

1. **Build for mobile:**
   ```bash
   npm run build:mobile
   ```

2. **Add iOS platform** (macOS only):
   ```bash
   npm run cap:add:ios
   ```

3. **Add Android platform:**
   ```bash
   npm run cap:add:android
   ```

4. **Sync Capacitor:**
   ```bash
   npm run cap:sync
   ```

### Development Workflow

1. **Make changes to your SvelteKit app**

2. **Rebuild and sync:**
   ```bash
   npm run cap:sync
   ```
   This builds the app and copies it to native projects.

3. **Open in native IDE:**
   - iOS: `npm run cap:ios` (opens Xcode)
   - Android: `npm run cap:android` (opens Android Studio)

4. **Run from native IDE:**
   - Use Xcode/Android Studio to run on simulator/device

### Important Notes

- **Always run `npm run cap:sync`** after making changes to your web app
- The mobile build uses `@sveltejs/adapter-static` (configured automatically)
- Web deployment still uses `@sveltejs/adapter-vercel`
- API routes work in mobile apps - they'll call your deployed backend

## Configuration Files

- `capacitor.config.ts` - Capacitor configuration
- `static/manifest.json` - PWA manifest
- `vite.config.ts` - PWA plugin configuration
- `svelte.config.js` - Adapter switching logic

## Building for Production

### Web (Vercel)
```bash
npm run build
# Deploy to Vercel as usual
```

### Mobile
```bash
npm run build:mobile
npm run cap:sync
# Then build in Xcode/Android Studio
```

## Troubleshooting

### Node Version Issues
If you see Node version errors, upgrade to Node 20+:
```bash
nvm install 20
nvm use 20
```

### Capacitor Sync Issues
- Make sure you've run `npm run build:mobile` first
- Delete `ios/` and `android/` folders and re-add platforms
- Check `capacitor.config.ts` has correct `webDir: 'build'`

### PWA Not Working
- Check browser console for service worker errors
- Verify manifest.json is accessible at `/manifest.json`
- Clear browser cache and hard refresh

## Next Steps

1. Customize app icons in `static/icons/`
2. Update `capacitor.config.ts` with your app ID and name
3. Configure native plugins as needed (camera, filesystem, etc.)
4. Test on real devices for best results


